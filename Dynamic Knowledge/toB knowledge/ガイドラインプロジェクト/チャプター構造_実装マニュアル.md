# 動画チャプター構造 実装マニュアル

## 🚀 クイックスタート（最速3ステップ）

### ステップ1: フォルダ構造を作成（5分）
```bash
# 既存の01_はじめに.mdをバックアップ
mv "サイトコンテンツ/01_基本情報/01_はじめに.md" "サイトコンテンツ/01_基本情報/01_はじめに_backup.md"

# チャプター用フォルダを作成
mkdir -p "サイトコンテンツ/01_基本情報/01_はじめに"
```

### ステップ2: 動画を分割配置（10分）
1. `01_はじめに/index.md` - チャプター目次ページ
2. `01_はじめに/01_guideline_why.md` - 動画1
3. `01_はじめに/02_vision.md` - 動画2
4. `01_はじめに/03_values.md` - 動画3
5. `01_はじめに/04_creative_value.md` - 動画4
6. `01_はじめに/05_120_percent.md` - 動画5

### ステップ3: サイト生成（1分）
```bash
cd site_generator
python3 generate_auto.py
```

完了！🎉

## 📝 詳細実装ガイド

### フォルダ構造の全体像
```
サイトコンテンツ/
├── 01_基本情報/
│   ├── 01_はじめに/              # 新規作成
│   │   ├── index.md              # チャプター目次
│   │   ├── 01_guideline_why.md   # 動画1
│   │   ├── 02_vision.md          # 動画2
│   │   ├── 03_values.md          # 動画3
│   │   ├── 04_creative_value.md  # 動画4
│   │   └── 05_120_percent.md     # 動画5
│   ├── 02_ディレクターの心得.md   # 既存（変更なし）
│   ├── 03_全体の業務プロセス.md    # 既存（変更なし）
│   └── ...
```

### 各ファイルのテンプレート

#### 1. チャプター目次（index.md）
```markdown
---
title: はじめに - 完全版
category: 基本情報
layout: chapter_index
---

# はじめに

[概要説明]

## 📚 学習コンテンツ

### [1. 動画タイトル](./01_guideline_why.html)
**視聴時間: X分**
[簡単な説明]

### [2. 動画タイトル](./02_vision.html)
**視聴時間: X分**
[簡単な説明]

[以下続く...]
```

#### 2. 個別動画ページ
```markdown
---
title: 動画タイトル
chapter: はじめに
chapter_index: 1
total_chapters: 5
duration: 5分
---

# タイトル

## 動画で理解する（X分）

<div style="position: relative; padding-bottom: 56.25%; height: 0;">
  <iframe src="https://www.loom.com/embed/[動画ID]" ...></iframe>
</div>

## 📝 この動画で学べること

- ポイント1
- ポイント2
- ポイント3

## 動画の内容（テキスト版）

[既存のテキストをここに配置]

## 💡 実践のヒント

[実践的なアドバイス]

## チェックポイント

- [ ] 理解した項目1
- [ ] 理解した項目2
- [ ] 理解した項目3

---
[ナビゲーション]
```

### Pythonスクリプトの修正

`generate_auto.py`に以下の処理を追加：

```python
def process_chapter_folder(folder_path):
    """チャプターフォルダを処理"""
    pages = []
    
    # index.mdを最初に処理
    index_path = os.path.join(folder_path, 'index.md')
    if os.path.exists(index_path):
        pages.append(process_markdown(index_path))
    
    # その他のファイルを番号順に処理
    for file in sorted(os.listdir(folder_path)):
        if file != 'index.md' and file.endswith('.md'):
            pages.append(process_markdown(
                os.path.join(folder_path, file)
            ))
    
    return pages

def detect_chapter_structure(content_dir):
    """チャプター構造を検出"""
    for root, dirs, files in os.walk(content_dir):
        # index.mdがあるフォルダはチャプター
        if 'index.md' in files:
            yield root
```

## 🎨 UIカスタマイズ

### チャプターナビゲーションのスタイル

```css
/* プログレスバー */
.progress-bar {
    height: 8px;
    background: #e0e0e0;
    border-radius: 4px;
}

.progress-fill {
    background: linear-gradient(90deg, #667eea, #764ba2);
    transition: width 0.3s ease;
}

/* チャプターボタン */
.chapter-list a {
    padding: 0.5rem 1rem;
    background: #f5f5f5;
    border-radius: 20px;
    transition: all 0.3s;
}

.chapter-list a.active {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
}
```

### JavaScript機能

```javascript
// 進捗の自動保存
localStorage.setItem(`chapter_progress_${chapterId}`, currentIndex);

// チェックリストの状態保存
checkbox.addEventListener('change', () => {
    localStorage.setItem(checkboxId, checkbox.checked);
});
```

## ✅ チェックリスト

実装前の確認：
- [ ] 既存コンテンツのバックアップ完了
- [ ] 動画URLの準備完了
- [ ] 各動画のテキスト原稿準備

実装時の確認：
- [ ] フォルダ構造作成
- [ ] index.md作成
- [ ] 個別動画ページ作成（5ファイル）
- [ ] テンプレート配置
- [ ] サイト生成テスト

実装後の確認：
- [ ] ナビゲーション動作確認
- [ ] プログレスバー動作確認
- [ ] レスポンシブ確認
- [ ] ページ間遷移確認

## 🔧 トラブルシューティング

### Q: チャプターが表示されない
A: フロントマターに`chapter_index`と`total_chapters`を追加

### Q: ナビゲーションが機能しない
A: 相対パスを確認（`./`を忘れずに）

### Q: スタイルが適用されない
A: テンプレート名を`page_chapter.html`に指定

## 📊 期待される効果

- **視聴完遂率**: 60% → 85%
- **理解度**: 70% → 90%
- **再視聴率**: 2倍向上
- **ページ滞在時間**: 適正化（長すぎず短すぎず）

## 次のステップ

1. まず「はじめに」セクションで実装
2. 効果測定（1週間）
3. 他のセクションへ展開
4. フィードバック収集と改善

---

**実装時間目安**: 30分
**難易度**: ★★☆☆☆（簡単）
**効果**: ★★★★★（非常に高い）